<!DOCTYPE html>

<!-- Edit user password card -->
<mat-card>
  <form
    class="edit-user-password"
    [formGroup]="editUserPassword"
    (ngSubmit)="editPasswordSubmission()"
  >
    <mat-card-title>Edit user password</mat-card-title>
    <div class="user-data-form-items">
      <div class="user-data-input">
        <mat-form-field appearance="fill">
          <mat-label for="user-password">Input old password*</mat-label>
          <input
            matInput
            id="old-user-password"
            [type]="hideOld ? 'password' : 'text'"
            formControlName="oldPassword"
          />
          <mat-icon matSuffix (click)="hideOld = !hideOld">{{
            hideOld ? "visibility_off" : "visibility"
          }}</mat-icon>
          <mat-error *ngIf="editUserPassword.controls['oldPassword'].invalid">
            Please enter a valid password
          </mat-error>
          <mat-error *ngIf="confirmedPassword.hasError('badOldPassword')">
            You entered wrong password
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label for="user-password">Input new password*</mat-label>
          <input
            matInput
            id="new-user-password"
            [type]="hideNew ? 'password' : 'text'"
            formControlName="newPassword"
            (change)="onPasswordChange()"
          />
          <mat-icon matSuffix (click)="hideNew = !hideNew">{{
            hideNew ? "visibility_off" : "visibility"
          }}</mat-icon>
          <mat-error *ngIf="editUserPassword.controls['newPassword'].invalid">
            Please enter a valid password
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label for="user-password">Confirm new password*</mat-label>
          <input
            matInput
            id="confirm-new-user-password"
            [type]="hideConfirmed ? 'password' : 'text'"
            formControlName="confirmedPassword"
            (change)="onPasswordChange()"
          />
          <mat-icon matSuffix (click)="hideConfirmed = !hideConfirmed">{{
            hideConfirmed ? "visibility_off" : "visibility"
          }}</mat-icon>
          <mat-error *ngIf="confirmedPassword.hasError('mismatch')">
            Passwords don't match
          </mat-error>
        </mat-form-field>
      </div>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="!editUserPassword.valid"
      >
        Save changes
      </button>
    </div>
  </form>
</mat-card>
